!function(e,o){if("object"==typeof exports&&"object"==typeof module)module.exports=o();else if("function"==typeof define&&define.amd)define([],o);else{var t=o();for(var i in t)("object"==typeof exports?exports:e)[i]=t[i]}}(window,function(){return function(e){var o={};function t(i){if(o[i])return o[i].exports;var s=o[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}return t.m=e,t.c=o,t.d=function(e,o,i){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var s in e)t.d(i,s,function(o){return e[o]}.bind(null,s));return i},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="",t(t.s=0)}([function(e,o,t){"use strict";t.r(o);var i={Backquote:{code:"Backquote",keyCode:192},Minus:{code:"Minus",keyCode:189},Equal:{code:"Equal",keyCode:187},BracketLeft:{code:"BracketLeft",keyCode:219},BracketRight:{code:"BracketRight",keyCode:221},Backslash:{code:"Backslash",keyCode:220},Semicolon:{code:"Semicolon",keyCode:186},Quote:{code:"Quote",keyCode:222},Comma:{code:"Comma",keyCode:188},Period:{code:"Period",keyCode:190},Slash:{code:"Slash",keyCode:191},AltLeft:{code:"AltLeft",keyCode:18},Home:{code:"Home",keyCode:36},End:{code:"End",keyCode:35},CapsLock:{code:"CapsLock",keyCode:20},ShiftLeft:{code:"ShiftLeft",keyCode:16},ShiftRight:{code:"ShiftRight",keyCode:16},Space:{code:"Space",keyCode:32},ArrowLeft:{code:"ArrowLeft",keyCode:37},ArrowUp:{code:"ArrowUp",keyCode:38},ArrowRight:{code:"ArrowRight",keyCode:39},ArrowDown:{code:"ArrowDown",keyCode:40},Backspace:{code:"Backspace",keyCode:8},Delete:{code:"Delete",keyCode:46},Tab:{code:"Tab",keyCode:9},Digit1:{code:"Digit1",keyCode:49},Digit2:{code:"Digit2",keyCode:50},Digit3:{code:"Digit3",keyCode:51},Digit4:{code:"Digit4",keyCode:52},Digit5:{code:"Digit5",keyCode:53},Digit6:{code:"Digit6",keyCode:54},Digit7:{code:"Digit7",keyCode:55},Digit8:{code:"Digit8",keyCode:56},Digit9:{code:"Digit9",keyCode:57},Digit0:{code:"Digit0",keyCode:48},KeyA:{code:"KeyA",keyCode:65},KeyB:{code:"KeyB",keyCode:66},KeyC:{code:"KeyC",keyCode:67},KeyD:{code:"KeyD",keyCode:68},KeyE:{code:"KeyE",keyCode:69},KeyF:{code:"KeyF",keyCode:70},KeyG:{code:"KeyG",keyCode:71},KeyH:{code:"KeyH",keyCode:72},KeyI:{code:"KeyI",keyCode:73},KeyJ:{code:"KeyJ",keyCode:74},KeyK:{code:"KeyK",keyCode:75},KeyL:{code:"KeyL",keyCode:76},KeyM:{code:"KeyM",keyCode:77},KeyN:{code:"KeyN",keyCode:78},KeyO:{code:"KeyO",keyCode:79},KeyP:{code:"KeyP",keyCode:80},KeyQ:{code:"KeyQ",keyCode:81},KeyR:{code:"KeyR",keyCode:82},KeyS:{code:"KeyS",keyCode:83},KeyT:{code:"KeyT",keyCode:84},KeyU:{code:"KeyU",keyCode:85},KeyV:{code:"KeyV",keyCode:86},KeyW:{code:"KeyW",keyCode:87},KeyX:{code:"KeyX",keyCode:88},KeyY:{code:"KeyY",keyCode:89},KeyZ:{code:"KeyZ",keyCode:90}};function s(e){return"number"==typeof e?function(e){for(var o in i)if(i[o].keyCode===e)return i[o].code;return null}(e):"string"==typeof e&&i[e]?i[e].code:null}var c=i,d=[{code:c.Backquote.code,base:"`",mod:"~"},{code:c.Minus.code,base:"-",mod:"_"},{code:c.Equal.code,base:"=",mod:"+"},{code:c.BracketLeft.code,base:"[",mod:"{"},{code:c.BracketRight.code,base:"]",mod:"}"},{code:c.Backslash.code,base:"\\",mod:"|"},{code:c.Semicolon.code,base:";",mod:":"},{code:c.Quote.code,base:"'",mod:'"'},{code:c.Comma.code,base:",",mod:"<"},{code:c.Period.code,base:".",mod:">"},{code:c.Slash.code,base:"/",mod:"?"},{code:c.CapsLock.code},{code:c.Space.code},{code:c.ArrowLeft.code},{code:c.ArrowUp.code},{code:c.ArrowRight.code},{code:c.ArrowDown.code},{code:c.Backspace.code},{code:c.Delete.code},{code:c.Home.code},{code:c.End.code},{code:c.Digit1.code,base:"1",mod:"!"},{code:c.Digit2.code,base:"2",mod:"@"},{code:c.Digit3.code,base:"3",mod:"#"},{code:c.Digit4.code,base:"4",mod:"$"},{code:c.Digit5.code,base:"5",mod:"%"},{code:c.Digit6.code,base:"6",mod:"^"},{code:c.Digit7.code,base:"7",mod:"&"},{code:c.Digit8.code,base:"8",mod:"*"},{code:c.Digit9.code,base:"9",mod:"("},{code:c.Digit0.code,base:"0",mod:")"},{code:c.KeyA.code,base:"a",mod:"A"},{code:c.KeyB.code,base:"b",mod:"B"},{code:c.KeyC.code,base:"c",mod:"C"},{code:c.KeyD.code,base:"d",mod:"D"},{code:c.KeyE.code,base:"e",mod:"E"},{code:c.KeyF.code,base:"f",mod:"F"},{code:c.KeyG.code,base:"g",mod:"G"},{code:c.KeyH.code,base:"h",mod:"H"},{code:c.KeyI.code,base:"i",mod:"I"},{code:c.KeyJ.code,base:"j",mod:"J"},{code:c.KeyK.code,base:"k",mod:"K"},{code:c.KeyL.code,base:"l",mod:"L"},{code:c.KeyM.code,base:"m",mod:"M"},{code:c.KeyN.code,base:"n",mod:"N"},{code:c.KeyO.code,base:"o",mod:"O"},{code:c.KeyP.code,base:"p",mod:"P"},{code:c.KeyQ.code,base:"q",mod:"q"},{code:c.KeyR.code,base:"r",mod:"R"},{code:c.KeyS.code,base:"s",mod:"S"},{code:c.KeyT.code,base:"t",mod:"T"},{code:c.KeyU.code,base:"u",mod:"U"},{code:c.KeyV.code,base:"v",mod:"V"},{code:c.KeyW.code,base:"w",mod:"W"},{code:c.KeyX.code,base:"x",mod:"X"},{code:c.KeyY.code,base:"y",mod:"Y"},{code:c.KeyZ.code,base:"z",mod:"Z"}];var n,r=(n={},d.forEach(function(e){n[e.code]=e}),n),a=function(){function e(){this.lang="en",this.charsets=r}return e.prototype.getChar=function(e,o){if(this.charsets[e]){var t={code:e,char:this.charsets[e].base,compose:this.charsets[e].compose};return o&&o.shiftKey&&(t.char=this.charsets[e].mod),o&&o.capslock&&t.char.match(/[a-zA-Z]/g)&&(t.char=this.charsets[e].mod),t}return null},e}(),h=[{code:c.Backquote.code,base:"`",mod:"~"},{code:c.Minus.code,base:"-",mod:"_"},{code:c.Equal.code,base:"=",mod:"+"},{code:c.BracketLeft.code,base:"[",mod:"{"},{code:c.BracketRight.code,base:"]",mod:"}"},{code:c.Backslash.code,base:"\\",mod:"|"},{code:c.Semicolon.code,base:";",mod:":"},{code:c.Quote.code,base:"'",mod:'"'},{code:c.Comma.code,base:",",mod:"<"},{code:c.Period.code,base:".",mod:">"},{code:c.Slash.code,base:"/",mod:"?"},{code:c.CapsLock.code},{code:c.Space.code},{code:c.ArrowLeft.code},{code:c.ArrowUp.code},{code:c.ArrowRight.code},{code:c.ArrowDown.code},{code:c.Backspace.code},{code:c.Delete.code},{code:c.Home.code},{code:c.End.code},{code:c.Digit1.code,base:"1",mod:"!"},{code:c.Digit2.code,base:"2",mod:"@"},{code:c.Digit3.code,base:"3",mod:"#"},{code:c.Digit4.code,base:"4",mod:"$"},{code:c.Digit5.code,base:"5",mod:"%"},{code:c.Digit6.code,base:"6",mod:"^"},{code:c.Digit7.code,base:"7",mod:"&"},{code:c.Digit8.code,base:"8",mod:"*"},{code:c.Digit9.code,base:"9",mod:"("},{code:c.Digit0.code,base:"0",mod:")"},{code:c.KeyA.code,base:"ㅁ",mod:null,compose:!0},{code:c.KeyB.code,base:"ㅠ",mod:null,compose:!0},{code:c.KeyC.code,base:"ㅊ",mod:null,compose:!0},{code:c.KeyD.code,base:"ㅇ",mod:null,compose:!0},{code:c.KeyE.code,base:"ㄷ",mod:"ㄸ",compose:!0},{code:c.KeyF.code,base:"ㄹ",mod:null,compose:!0},{code:c.KeyG.code,base:"ㅎ",mod:null,compose:!0},{code:c.KeyH.code,base:"ㅗ",mod:null,compose:!0},{code:c.KeyI.code,base:"ㅑ",mod:null,compose:!0},{code:c.KeyJ.code,base:"ㅓ",mod:null,compose:!0},{code:c.KeyK.code,base:"ㅏ",mod:null,compose:!0},{code:c.KeyL.code,base:"ㅣ",mod:null,compose:!0},{code:c.KeyM.code,base:"ㅡ",mod:null,compose:!0},{code:c.KeyN.code,base:"ㅜ",mod:null,compose:!0},{code:c.KeyO.code,base:"ㅐ",mod:"ㅒ",compose:!0},{code:c.KeyP.code,base:"ㅔ",mod:"ㅖ",compose:!0},{code:c.KeyQ.code,base:"ㅂ",mod:"ㅃ",compose:!0},{code:c.KeyR.code,base:"ㄱ",mod:"ㄲ",compose:!0},{code:c.KeyS.code,base:"ㄴ",mod:null,compose:!0},{code:c.KeyT.code,base:"ㅅ",mod:"ㅆ",compose:!0},{code:c.KeyU.code,base:"ㅕ",mod:null,compose:!0},{code:c.KeyV.code,base:"ㅍ",mod:null,compose:!0},{code:c.KeyW.code,base:"ㅈ",mod:"ㅉ",compose:!0},{code:c.KeyX.code,base:"ㅌ",mod:null,compose:!0},{code:c.KeyY.code,base:"ㅛ",mod:null,compose:!0},{code:c.KeyZ.code,base:"ㅋ",mod:null,compose:!0}];var u=function(){var e={};return h.forEach(function(o){e[o.code]=o}),e}(),l={en:a,ko:function(){function e(){this.lang="ko",this.charsets=u}return e.prototype.getChar=function(e,o){if(this.charsets[e]){var t={code:e,char:this.charsets[e].base,compose:this.charsets[e].compose};return o&&o.shiftKey&&this.charsets[e].mod&&(t.char=this.charsets[e].mod),t}return null},e}()},p=function(){function e(){this.lang="en"}return e.prototype.compose=function(e){return e},e.prototype.decompose=function(e){return e},e}(),m=[12593,12594,12596,12599,12600,12601,12609,12610,12611,12613,12614,12615,12616,12617,12618,12619,12620,12621,12622],y=[0,12593,12594,12595,12596,12597,12598,12599,12601,12602,12603,12604,12605,12606,12607,12608,12609,12610,12612,12613,12614,12615,12616,12618,12619,12620,12621,12622],f=[0,0,0,0,0,0,0,0,0,800,801,820,0,0,1304,1305,1320,0,0,1820],g=[0,0,0,119,0,422,427,0,0,801,816,817,819,825,826,827,0,0,1719,0,0],C=44032,b=12623,K=19,v=21,k=28,P=588,D=11172,S={en:p,ko:function(){function e(){this.lang="ko"}return e.prototype.compose=function(e){var o=e.length;if(0===o)return"";for(var t,i,s,c,d,n,r,a=m,h=y,u=b,l=C,p=v,D=k,S=P,w=K,A=g,E=f,L=e.charCodeAt(0),M=String.fromCharCode(L),x=1;x<o;++x)if(t=e.charCodeAt(x),-1!==(i=a.indexOf(L))&&0<=(s=t-u)&&s<p)L=l+(i*p+s)*D,M=M.slice(0,M.length-1)+String.fromCharCode(L);else{if(0<=(r=L-l)&&r<11145&&r%D==0){if(-1!==(d=h.indexOf(t))){L+=d,M=M.slice(0,M.length-1)+String.fromCharCode(L);continue}if(s=r%S/D,(c=E.indexOf(100*s+(t-u)))>0){L+=(c-s)*D,M=M.slice(0,M.length-1)+String.fromCharCode(L);continue}}if(0<=r&&r<11172&&r%D!=0){if(d=r%D,0<=(s=t-u)&&s<p){if(0<=(i=a.indexOf(h[d]))&&i<w){M=M.slice(0,M.length-1)+String.fromCharCode(L-d),L=l+(i*p+s)*D,M+=String.fromCharCode(L);continue}if(d<A.length&&0!==A[d]){M=M.slice(0,M.length-1)+String.fromCharCode(L-d+Math.floor(A[d]/100)),L=l+(a.indexOf(h[A[d]%100])*p+s)*D,M+=String.fromCharCode(L);continue}}if((n=A.indexOf(100*d+h.indexOf(t)))>0){L=L+n-d,M=M.slice(0,M.length-1)+String.fromCharCode(L);continue}}L=t,M+=String.fromCharCode(t)}return M},e.prototype.decompose=function(e){for(var o,t,i,s,c,d=m,n=y,r=b,a=C,h=k,u=P,l=D,p=e.length,f="",g=0;g<p;g++)(t=(o=e.charCodeAt(g))-a)<0||t>=l?f+=String.fromCharCode(o):(i=d[Math.floor(t/u)],s=r+t%u/h,c=n[t%h],f+=String.fromCharCode(i,s),0!==c&&(f+=String.fromCharCode(c)));return f},e}()};var w={getCaretCoord:function(e,o){e.offsetLeft,e.offsetTop;for(var t=document.createElement("div"),i=getComputedStyle(e),s=0,c=i;s<c.length;s++){var d=c[s];t.style[d]=i[d]}var n="INPUT"===e.tagName?e.value.replace(/ /g,"."):e.value,r=n.substr(0,o);t.textContent=r,"TEXTAREA"===e.tagName&&(t.style.height="auto"),"INPUT"===e.tagName&&(t.style.width="auto");var a=document.createElement("span");a.textContent=n.substr(o)||".",t.appendChild(a),document.body.appendChild(t);var h=a.offsetLeft,u=a.offsetTop;return document.body.removeChild(t),{x:h,y:u}},getBrowser:function(){return navigator?-1!=(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?"Opera":-1!=navigator.userAgent.indexOf("Chrome")?"Chrome":-1!=navigator.userAgent.indexOf("Safari")?"Safari":-1!=navigator.userAgent.indexOf("Firefox")?"Firefox":-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?"IE":null:null},getClipboardText:function(e){var o="";return e.clipboardData&&e.clipboardData.getData&&(o=e.clipboardData.getData("text/plain")),window.clipboardData&&window.clipboardData.getData&&(o=window.clipboardData.getData("Text")),o}},A=function(){return(A=Object.assign||function(e){for(var o,t=1,i=arguments.length;t<i;t++)for(var s in o=arguments[t])Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);return e}).apply(this,arguments)},E={lang:"en",value:"",caretPos:{startPos:0,endPos:0,direction:null}},L=function(){function e(e){var o,t;if(e&&(e=A({},E,e)),!l[e.lang])throw new Error("Keyboard language not compatible.");this.lang=e.lang,this.pattern=e.pattern,this.Keyboard=new l[this.lang],this.IME=new S[this.lang],this.setInput(e.input),this.value=e.value,this.caretPos={startPos:e.caretPos.startPos,endPos:e.caretPos.endPos,direction:null},this.composing=null,this.capslock=!1,this.commands=((o={})[c.KeyA.code]=[{mods:["ctrlKey"],action:this.selectWholeValue.bind(this)}],o[c.Space.code]=[{mods:[],action:this.onSpace.bind(this)}],o[c.Backspace.code]=[{mods:[],action:this.onBackspace.bind(this)}],o[c.Delete.code]=[{mods:[],action:this.onDelete.bind(this)}],o[c.CapsLock.code]=[{mods:[],action:this.onCapsLock.bind(this)}],o[c.ArrowUp.code]=[{mods:[],action:this.onMoveCaret.bind(this)}],o[c.ArrowRight.code]=[{mods:[],action:this.onMoveCaret.bind(this)}],o[c.ArrowDown.code]=[{mods:[],action:this.onMoveCaret.bind(this)}],o[c.ArrowLeft.code]=[{mods:[],action:this.onMoveCaret.bind(this)}],o[c.Home.code]=[{mods:[],action:this.onMoveCaret.bind(this)}],o[c.End.code]=[{mods:[],action:this.onMoveCaret.bind(this)}],o[c.KeyC.code]=[{mods:["ctrlKey"],action:this.onCopy.bind(this)}],o[c.KeyV.code]=[{mods:["ctrlKey"],action:this.onPaste.bind(this)}],o),this.notPreventCommands=((t={})[c.KeyC.code]=this.commands[c.KeyC.code],t[c.KeyV.code]=this.commands[c.KeyV.code],t)}return e.prototype.selectWholeValue=function(){this.setCaretPos(0,this.value.length)},e.prototype.getCaretPos=function(){return{startPos:this.caretPos.startPos,endPos:this.caretPos.endPos,direction:this.caretPos.direction}},e.prototype.setCaretPos=function(e,o,t){var i=this.value.length;e<0&&(e=0),e>i&&(e=i),void 0===o&&(o=e),o<0&&(o=0),e>o&&(e=o),o<0&&(o=e),o>i&&(o=i),this.caretPos.direction=t&&e!==o?t:null,this.caretPos.startPos=e,this.caretPos.endPos=o},e.prototype.insertChar=function(e){var o=this.value,t=o.length;if(this.pattern){var i=e.match(this.pattern);if(!i)return;e=i.join("")}this.value=o.substring(0,this.caretPos.startPos)+e+o.substring(this.caretPos.endPos,t),this.setCaretPos(this.caretPos.startPos+e.length),this.updateInput()},e.prototype.removeComposing=function(){return this.composing?(this.setCaretPos(this.composing.position,this.composing.position+this.composing.char.length),this.composing=null,this.removeSelection()):""},e.prototype.isMultipleSelection=function(){var e=this.getCaretPos();return e.startPos!==e.endPos},e.prototype.onSpace=function(){this.isMultipleSelection()?this.removeSelection():(this.composing=null,this.insertChar(" "))},e.prototype.onDelete=function(){if(this.isMultipleSelection())this.removeSelection();else{var e=this.getCaretPos().startPos;this.composing=null,this.setCaretPos(e,e+1),this.removeSelection()}},e.prototype.onBackspace=function(){if(this.isMultipleSelection())this.removeSelection();else{var e=this.getCaretPos().startPos;if(this.composing){var o=this.removeComposing(),t=this.IME.decompose(o);if(1===t.length)return;var i=this.IME.compose(t.slice(0,-1));return this.composing=this.createComposition(i,this.caretPos.startPos+(i.length-1)),void this.insertChar(this.composing.char)}this.setCaretPos(e-1,e),this.removeSelection()}},e.prototype.onMoveCaret=function(e,o){var t=this.getCaretPos(),i=t.startPos,s=t.endPos,d=t.direction;if(this.composing=null,e===c.ArrowRight.code){if(o.ctrlKey){var n="left"===d?i:s;return(a=(r=this.value.substr(n,this.value.length)).match(/[^ .!@#]+/gi))&&(n=this.value.indexOf(a[0],n)+a[0].length,i="left"===d?n:i,s="left"===d?s:n,d=d||"right"),this.setCaretPos(o.shiftKey?i:s,s,d)}return i===s||o.shiftKey?(o.shiftKey?(i="left"===d?i+1:i,s="left"===d?s:s+1,d=d||"right"):(i=s+=1,d=null),this.setCaretPos(i,s,d)):this.setCaretPos(s)}if(e===c.ArrowLeft.code){if(o.ctrlKey){var r,a;n="right"===d?s:i;return(a=(r=this.value.substr(0,n)).match(/[^ .!@#]+/gi))&&(n=r.lastIndexOf(a[a.length-1]),i="right"===d?i:n,s="right"===d?n:s,d=d||"left"),this.setCaretPos(i,o.shiftKey?s:i,d)}return i===s||o.shiftKey?(o.shiftKey?(i="right"===d?i:i-1,s="right"===d?s-1:s,d=d||"left"):(s=i-=1,d=null),this.setCaretPos(i,s,d)):this.setCaretPos(i)}return e===c.ArrowUp.code?o.shiftKey?this.setCaretPos(0,s):this.setCaretPos(0):e===c.ArrowDown.code?o.shiftKey?this.setCaretPos(i,this.value.length):this.setCaretPos(this.value.length):e===c.Home.code?o.shiftKey?this.setCaretPos(0,s):this.setCaretPos(0):e===c.End.code?o.shiftKey?this.setCaretPos(i,this.value.length):this.setCaretPos(this.value.length):void 0},e.prototype.onInputInput=function(e){var o=this.input,t=o.selectionStart,i=o.selectionEnd,s=o.value;this.input.value=s.substr(0,t)+s.substr(i,s.length),this.input.selectionStart=t,this.input.selectionEnd=t},e.prototype.onCompositionstart=function(e){this.input.blur(),requestAnimationFrame(this.updateInput.bind(this))},e.prototype.onCompositionend=function(e){this.composing=null},e.prototype.updateCaretPosFromInput=function(){var e=this.getCaretPos(),o=e.startPos,t=e.endPos,i=this;requestAnimationFrame(function(){var e=i.input,s=e.selectionStart,c=e.selectionEnd;o===s&&t===c||(i.setCaretPos(s,c),i.composing=null)})},e.prototype.onCopy=function(){var e=this.getCaretPos(),o=e.startPos,t=e.endPos;this.clipboard=this.value.substr(o,t)},e.prototype.onPaste=function(e){var o=this.clipboard;e&&e instanceof ClipboardEvent&&(e.preventDefault(),o=w.getClipboardText(e)),this.insertChar(o)},e.prototype.onInputMousedown=function(){this.composing=null,document.addEventListener("mouseup",this.updateCaretPosFromInput.bind(this),{once:!0})},e.prototype.setInput=function(e){if(e){if("object"!=typeof e||!(e instanceof HTMLInputElement))throw new Error("HTMLInputElement is required");if(void 0!==e.GhostKeyboard)throw new Error("HTMLInputElement has already Ghost keyboard attached.");e.GhostKeyboard=!0,this.input=e,this.input.setAttribute("autocomplete","off"),this.input.addEventListener("keydown",this.event.bind(this)),this.input.addEventListener("paste",this.onPaste.bind(this)),"Safari"===w.getBrowser()?this.input.addEventListener("beforeinput",this.onInputInput.bind(this)):(this.input.addEventListener("compositionupdate",this.onCompositionstart.bind(this)),this.input.addEventListener("compositionend",this.onCompositionend.bind(this))),this.input.addEventListener("mousedown",this.onInputMousedown.bind(this))}},e.prototype.updateInput=function(){if(this.input){this.input.value=this.value,this.input.focus(),this.input.selectionStart=this.caretPos.startPos,this.input.selectionEnd=this.caretPos.endPos;var e=w.getCaretCoord(this.input,this.caretPos.startPos),o=this.input.scrollLeft,t=this.input.scrollLeft+this.input.clientWidth;(e.x<o||e.x>t)&&(this.input.scrollLeft=e.x-this.input.clientWidth/2)}},e.prototype.removeSelection=function(){var e=this.getCaretPos(),o=e.startPos,t=e.endPos,i=this.value,s=i.slice(o,t);return this.value=i.slice(0,o)+i.slice(t),this.setCaretPos(o),this.composing=null,s},e.prototype.normalizeMods=function(e){var o={};return["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(t){o[t]=!1,e&&e[t]&&(o[t]=e[t])}),e&&e.metaKey&&(o.ctrlKey=!0),o.capslock=this.capslock,o},e.prototype.createComposition=function(e,o){return{char:e,position:o}},e.prototype.onCapsLock=function(){this.capslock=!this.capslock},e.prototype.getCommandAction=function(e,o,t){var i=null;if(e[o])for(var s=e[o],c=0;c<s.length;c++){if(0===s[c].mods.filter(function(e){return!0!==t[e]}).length){i=s[c].action;break}}return i},e.prototype.filterPattern=function(){if(this.pattern){var e=this.getCaretPos(),o=e.startPos,t=(e.endPos,new RegExp("[^"+this.pattern.source+"]","g")),i=this.value.substr(0,o),s=i.replace(t,"");this.value=this.value.replace(t,""),i.length!==s.length&&this.setCaretPos(o-(i.length-s.length))}},e.prototype.executeKey=function(e,o){o=this.normalizeMods(o);var t=this.getCommandAction(this.commands,e,o);if(t)return t(e,o),this.updateInput(),this.value;var i=this.Keyboard.getChar(e,o);if(!i||!i.char)return this.value;var s=i.char;if(this.composing&&i.compose){var c=this.removeComposing();s=this.IME.compose(c+s)}return this.composing=i.compose?this.createComposition(s.charAt(s.length-1),this.caretPos.startPos+(s.length-1)):null,this.insertChar(s),this.value},e.prototype.setValue=function(e){this.value=e,this.setCaretPos(0)},e.prototype.event=function(e){if("object"!=typeof e||!e.type)throw new Error("The event have to be a KeyboardEvent.");if("keydown"===e.type){var o=s(e.code?e.code:e.which);if(!o)return;var t=this.normalizeMods(e);if(e.getModifierState&&(this.capslock=e.getModifierState("CapsLock"),t.capslock=this.capslock),this.getCommandAction(this.notPreventCommands,o,t))return;return e.preventDefault(),this.executeKey(o,t)}},e.prototype.type=function(e,o){var t=s(e);return this.executeKey(t,o)},e}();function M(e){return new L(e)}t.d(o,"GhostKeyboard",function(){return M});o.default=M}])});